(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["admin"],{

/***/ "./assets/admin.js":
/*!*************************!*\
  !*** ./assets/admin.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! core-js/modules/es.function.name.js */ "./node_modules/core-js/modules/es.function.name.js");

__webpack_require__(/*! core-js/modules/es.number.constructor.js */ "./node_modules/core-js/modules/es.number.constructor.js");

__webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");

__webpack_require__(/*! core-js/modules/es.parse-int.js */ "./node_modules/core-js/modules/es.parse-int.js");

__webpack_require__(/*! core-js/modules/es.promise.js */ "./node_modules/core-js/modules/es.promise.js");

__webpack_require__(/*! core-js/modules/web.timers.js */ "./node_modules/core-js/modules/web.timers.js");

var Routing = __webpack_require__(/*! ../vendor/friendsofsymfony/jsrouting-bundle/Resources/public/js/router */ "./vendor/friendsofsymfony/jsrouting-bundle/Resources/public/js/router.js");

var Routes = __webpack_require__(/*! ./js-routes.json */ "./assets/js-routes.json");

Routing.setRoutingData(Routes);
var goods = document.getElementById('goodDelete');
document.addEventListener('DOMContentLoaded', function (event) {
  fetch(Routing.generate('getGoods'), {
    method: 'POST',
    headers: {
      "X-Requested-With": "XMLHttpRequest"
    }
  }).then(function (response) {
    return response.json();
  }).then(function (result) {
    for (var i = 0; i < result.length; i++) {
      Insert(result[i]);
    }
  });
});
document.addEventListener('click', function (event) {
  var target = event.target;

  if (target.type === "button" && target.className === "submitButton") {
    // get DATA
    var name = document.getElementById('good_name').value;
    var price = document.getElementById('good_price').value;
    var color = document.getElementById('good_color').value;
    var description = document.getElementById('good_description').value;
    var count = document.getElementById('good_count').value;
    var category = document.getElementById('good_category');
    var category_option = category[category.selectedIndex].id;
    new Promise(function (resolve, reject) {
      var url = Routing.generate('addGood');
      var formData = new FormData();
      category = category.length === 0 ? "null" : category;
      var data = {
        'name': name,
        'price': price,
        'color': color,
        'description': description,
        'count': count,
        'category': category_option
      };
      formData.append('data', JSON.stringify(data));
      xhrReq(resolve, reject, url, "POST", formData);
    }).then(function (response) {
      target.value = 'Submitted';
      setTimeout(function () {
        target.value = "Submit";
      }, 3000);
    });
  }

  if (target.type === "button" && target.className === "deleteButton" && isNaN(parseInt(target.id)) === false) {
    new Promise(function (resolve, reject) {
      var formData = new FormData();
      formData.append('id', target.id);
      xhrReq(resolve, reject, Routing.generate('removeUser', {
        id: target.id
      }), "POST", formData);
    }).then(function (response) {
      var user = document.getElementById('user_' + target.id);
      user.parentNode.removeChild(user);
    });
  }

  if (target.type === "button" && target.className === "promtButton" && isNaN(parseInt(target.id)) === false) {
    new Promise(function (resolve, reject) {
      var formData = new FormData();
      formData.append('id', target.id);
      xhrReq(resolve, reject, Routing.generate('promtUser', {
        id: target.id
      }), "POST", formData);
    }).then(function (response) {
      var user = document.getElementById('email_' + target.id);
      user.style.color = "green";
      setTimeout(function () {
        user.style.color = "black";
      }, 3000);
    });
  }

  if (target.type === "button" && isNaN(parseInt(Number(target.id))) === false) {
    var formData = new FormData();
    formData.append('id', target.id);
    fetch(Routing.generate('removeGood', {
      id: target.id
    }), {
      method: "POST",
      headers: {
        "X-Requested-With": "XMLHttpRequest"
      },
      body: formData
    }).then(function (response) {
      return response.json();
    }).then(function (result) {
      var good = document.getElementById('good_' + target.id);
      good.parentNode.removeChild(good);
    });
  }
});

function xhrReq(resolve, reject, url, method, formData) {
  var xhr = new XMLHttpRequest();
  xhr.open(method, url);
  xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
  xhr.addEventListener('load', function (event) {
    if (this.readyState === 4) {
      if (this.status === 200 && this.statusText === "OK") resolve(JSON.parse(this.responseText));else reject("ERROR");
    }
  });
  xhr.send(formData);
}

function Insert(data) {
  var form = document.createElement('form');
  form.method = "POST";
  form.id = "good_" + data.id;
  var good = document.createElement('h4');
  good.setAttribute('id', "goodName_" + data.id);
  good.appendChild(document.createTextNode(data.name + " (" + data.id + ")"));
  var button = document.createElement('input');
  button.type = 'button';
  button.setAttribute('id', data.id);
  button.setAttribute('value', "Delete");
  form.appendChild(good);
  form.appendChild(button);
  goods.appendChild(form);
}

/***/ })

},[["./assets/admin.js","runtime","vendors~admin~cart~main","vendors~admin","admin~cart~main"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvYWRtaW4uanMiXSwibmFtZXMiOlsiUm91dGluZyIsInJlcXVpcmUiLCJSb3V0ZXMiLCJzZXRSb3V0aW5nRGF0YSIsImdvb2RzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImZldGNoIiwiZ2VuZXJhdGUiLCJtZXRob2QiLCJoZWFkZXJzIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsInJlc3VsdCIsImkiLCJsZW5ndGgiLCJJbnNlcnQiLCJ0YXJnZXQiLCJ0eXBlIiwiY2xhc3NOYW1lIiwibmFtZSIsInZhbHVlIiwicHJpY2UiLCJjb2xvciIsImRlc2NyaXB0aW9uIiwiY291bnQiLCJjYXRlZ29yeSIsImNhdGVnb3J5X29wdGlvbiIsInNlbGVjdGVkSW5kZXgiLCJpZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidXJsIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImRhdGEiLCJhcHBlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwieGhyUmVxIiwic2V0VGltZW91dCIsImlzTmFOIiwicGFyc2VJbnQiLCJ1c2VyIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwic3R5bGUiLCJOdW1iZXIiLCJib2R5IiwiZ29vZCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic2VuZCIsImZvcm0iLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsImJ1dHRvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsT0FBTyxHQUFHQyxtQkFBTyxDQUFDLHdKQUFELENBQXJCOztBQUNBLElBQUlDLE1BQU0sR0FBR0QsbUJBQU8sQ0FB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M0QsUUFBUSxDQUFDNEQsYUFBVCxDQUF1QixNQUF2QixDQUFYO0FBQ0FELE1BQUksQ0FBQ3JELE1BQUwsR0FBYyxNQUFkO0FBQ0FxRCxNQUFJLENBQUNoQyxFQUFMLEdBQVUsVUFBVU8sSUFBSSxDQUFDUCxFQUF6QjtBQUVBLE1BQUlxQixJQUFJLEdBQUdoRCxRQUFRLENBQUM0RCxhQUFULENBQXVCLElBQXZCLENBQVg7QUFDQVosTUFBSSxDQUFDYSxZQUFMLENBQWtCLElBQWxCLEVBQXdCLGNBQVkzQixJQUFJLENBQUNQLEVBQXpDO0FBQ0FxQixNQUFJLENBQUNjLFdBQUwsQ0FBaUI5RCxRQUFRLENBQUMrRCxjQUFULENBQXdCN0IsSUFBSSxDQUFDaEIsSUFBTCxHQUFZLElBQVosR0FBbUJnQixJQUFJLENBQUNQLEVBQXhCLEdBQTZCLEdBQXJELENBQWpCO0FBRUEsTUFBSXFDLE1BQU0sR0FBR2hFLFFBQVEsQ0FBQzRELGFBQVQsQ0FBdUIsT0FBdkIsQ0FBYjtBQUNBSSxRQUFNLENBQUNoRCxJQUFQLEdBQWMsUUFBZDtBQUNBZ0QsUUFBTSxDQUFDSCxZQUFQLENBQW9CLElBQXBCLEVBQTBCM0IsSUFBSSxDQUFDUCxFQUEvQjtBQUNBcUMsUUFBTSxDQUFDSCxZQUFQLENBQW9CLE9BQXBCLEVBQTZCLFFBQTdCO0FBRUFGLE1BQUksQ0FBQ0csV0FBTCxDQUFpQmQsSUFBakI7QUFDQVcsTUFBSSxDQUFDRyxXQUFMLENBQWlCRSxNQUFqQjtBQUNBakUsT0FBSyxDQUFDK0QsV0FBTixDQUFrQkgsSUFBbEI7QUFDSCxDIiwiZmlsZSI6ImFkbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IFJvdXRpbmcgPSByZXF1aXJlKFwiLi4vdmVuZG9yL2ZyaWVuZHNvZnN5bWZvbnkvanNyb3V0aW5nLWJ1bmRsZS9SZXNvdXJjZXMvcHVibGljL2pzL3JvdXRlclwiKTtcbmxldCBSb3V0ZXMgPSByZXF1aXJlKCcuL2pzLXJvdXRlcy5qc29uJyk7XG5Sb3V0aW5nLnNldFJvdXRpbmdEYXRhKFJvdXRlcyk7XG5sZXQgZ29vZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZERlbGV0ZScpO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgZmV0Y2goUm91dGluZy5nZW5lcmF0ZSgnZ2V0R29vZHMnKSwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1wiWC1SZXF1ZXN0ZWQtV2l0aFwiOiBcIlhNTEh0dHBSZXF1ZXN0XCJ9XG4gICAgfSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBJbnNlcnQocmVzdWx0W2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbn0pXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICBpZiAodGFyZ2V0LnR5cGUgPT09IFwiYnV0dG9uXCIgJiYgdGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJzdWJtaXRCdXR0b25cIikge1xuICAgICAgICAvLyBnZXQgREFUQVxuICAgICAgICBsZXQgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb29kX25hbWUnKS52YWx1ZVxuICAgICAgICBsZXQgcHJpY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZF9wcmljZScpLnZhbHVlXG4gICAgICAgIGxldCBjb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb29kX2NvbG9yJykudmFsdWVcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dvb2RfZGVzY3JpcHRpb24nKS52YWx1ZVxuICAgICAgICBsZXQgY291bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZF9jb3VudCcpLnZhbHVlXG4gICAgICAgIGxldCBjYXRlZ29yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb29kX2NhdGVnb3J5JylcbiAgICAgICAgbGV0IGNhdGVnb3J5X29wdGlvbiA9IGNhdGVnb3J5W2NhdGVnb3J5LnNlbGVjdGVkSW5kZXhdLmlkXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSBSb3V0aW5nLmdlbmVyYXRlKCdhZGRHb29kJyk7XG4gICAgICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIGNhdGVnb3J5ID0gY2F0ZWdvcnkubGVuZ3RoID09PSAwID8gXCJudWxsXCIgOiBjYXRlZ29yeVxuICAgICAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgJ25hbWUnOiBuYW1lLFxuICAgICAgICAgICAgICAgICdwcmljZSc6IHByaWNlLFxuICAgICAgICAgICAgICAgICdjb2xvcic6IGNvbG9yLFxuICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbic6IGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICdjb3VudCc6IGNvdW50LFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5X29wdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkYXRhJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgICAgICAgICB4aHJSZXEocmVzb2x2ZSwgcmVqZWN0LCB1cmwsIFwiUE9TVFwiLCBmb3JtRGF0YSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSA9ICdTdWJtaXR0ZWQnO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUgPSBcIlN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgICAgICB9KVxuICAgIH1cbiAgICBpZiAodGFyZ2V0LnR5cGUgPT09IFwiYnV0dG9uXCIgJiYgdGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJkZWxldGVCdXR0b25cIiAmJiBpc05hTihwYXJzZUludCh0YXJnZXQuaWQpKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2lkJywgdGFyZ2V0LmlkKVxuICAgICAgICAgICAgeGhyUmVxKHJlc29sdmUsIHJlamVjdCwgUm91dGluZy5nZW5lcmF0ZSgncmVtb3ZlVXNlcicsIHtpZDogdGFyZ2V0LmlkfSksIFwiUE9TVFwiLCBmb3JtRGF0YSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB1c2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfJyArIHRhcmdldC5pZClcbiAgICAgICAgICAgICAgICB1c2VyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodXNlcilcbiAgICAgICAgICAgIH0pXG4gICAgfVxuICAgIGlmICh0YXJnZXQudHlwZSA9PT0gXCJidXR0b25cIiAmJiB0YXJnZXQuY2xhc3NOYW1lID09PSBcInByb210QnV0dG9uXCIgJiYgaXNOYU4ocGFyc2VJbnQodGFyZ2V0LmlkKSkgPT09IGZhbHNlKSB7XG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpZCcsIHRhcmdldC5pZClcbiAgICAgICAgICAgIHhoclJlcShyZXNvbHZlLCByZWplY3QsIFJvdXRpbmcuZ2VuZXJhdGUoJ3Byb210VXNlcicsIHtpZDogdGFyZ2V0LmlkfSksIFwiUE9TVFwiLCBmb3JtRGF0YSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB1c2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsXycgKyB0YXJnZXQuaWQpXG4gICAgICAgICAgICAgICAgdXNlci5zdHlsZS5jb2xvciA9IFwiZ3JlZW5cIjtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlci5zdHlsZS5jb2xvciA9IFwiYmxhY2tcIlxuICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuXG4gICAgICAgICAgICB9KVxuICAgIH1cbiAgICBpZiAodGFyZ2V0LnR5cGUgPT09IFwiYnV0dG9uXCIgJiYgaXNOYU4ocGFyc2VJbnQoTnVtYmVyKHRhcmdldC5pZCkpKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaWQnLCB0YXJnZXQuaWQpXG4gICAgICAgIGZldGNoKFJvdXRpbmcuZ2VuZXJhdGUoJ3JlbW92ZUdvb2QnLCB7aWQ6IHRhcmdldC5pZH0pLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1wiWC1SZXF1ZXN0ZWQtV2l0aFwiOiBcIlhNTEh0dHBSZXF1ZXN0XCJ9LFxuICAgICAgICAgICAgYm9keTogZm9ybURhdGFcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGdvb2QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZF8nICsgdGFyZ2V0LmlkKVxuICAgICAgICAgICAgICAgIGdvb2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChnb29kKVxuICAgICAgICAgICAgfSlcbiAgICB9XG59KVxuXG5mdW5jdGlvbiB4aHJSZXEocmVzb2x2ZSwgcmVqZWN0LCB1cmwsIG1ldGhvZCwgZm9ybURhdGEpIHtcbiAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1SZXF1ZXN0ZWQtV2l0aFwiLCBcIlhNTEh0dHBSZXF1ZXN0XCIpO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwICYmIHRoaXMuc3RhdHVzVGV4dCA9PT0gXCJPS1wiKVxuICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCkpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlamVjdChcIkVSUk9SXCIpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICB4aHIuc2VuZChmb3JtRGF0YSk7XG59XG5cbmZ1bmN0aW9uIEluc2VydChkYXRhKSB7XG4gICAgbGV0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJylcbiAgICBmb3JtLm1ldGhvZCA9IFwiUE9TVFwiO1xuICAgIGZvcm0uaWQgPSBcImdvb2RfXCIgKyBkYXRhLmlkO1xuXG4gICAgbGV0IGdvb2QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNCcpO1xuICAgIGdvb2Quc2V0QXR0cmlidXRlKCdpZCcsIFwiZ29vZE5hbWVfXCIrZGF0YS5pZClcbiAgICBnb29kLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGEubmFtZSArIFwiIChcIiArIGRhdGEuaWQgKyBcIilcIikpO1xuXG4gICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCdpZCcsIGRhdGEuaWQpXG4gICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBcIkRlbGV0ZVwiKVxuXG4gICAgZm9ybS5hcHBlbmRDaGlsZChnb29kKVxuICAgIGZvcm0uYXBwZW5kQ2hpbGQoYnV0dG9uKVxuICAgIGdvb2RzLmFwcGVuZENoaWxkKGZvcm0pXG59Il0sInNvdXJjZVJvb3QiOiIifQ==